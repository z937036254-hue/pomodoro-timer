# 番茄时钟应用设计文档

## 设计理念
遵循 Apple Human Interface Guidelines (HIG)，打造简洁、现代化的番茄时钟应用。设计针对移动端竖屏（9:16）和单手操作优化。

## 配色方案
- **主色调（Primary）**: `#FF6B6B` - 番茄红色，用于强调和主要操作按钮
- **背景色（Background）**: 
  - 浅色模式：`#FFFFFF`
  - 深色模式：`#151718`
- **表面色（Surface）**: 
  - 浅色模式：`#F8F9FA`
  - 深色模式：`#1E2022`
- **前景色（Foreground）**: 
  - 浅色模式：`#11181C`
  - 深色模式：`#ECEDEE`
- **静音色（Muted）**: 
  - 浅色模式：`#687076`
  - 深色模式：`#9BA1A6`
- **成功色（Success）**: `#4CAF50` - 完成任务提示
- **警告色（Warning）**: `#FFA726` - 休息时间提示

## 屏幕列表

### 1. 主屏幕（Home）
**主要内容**：
- 大型圆形计时器显示（居中）
  - 显示剩余时间（分钟:秒）
  - 圆形进度环动画
  - 当前模式标签（工作/休息）
- 开始/暂停按钮（计时器下方）
- 重置按钮（小型，次要操作）
- 当前任务名称显示（计时器上方）

**功能**：
- 点击开始/暂停按钮控制计时
- 点击重置按钮重置当前番茄钟
- 自动切换工作/休息模式
- 后台计时支持
- 时间到达时通知提醒

### 2. 任务列表屏幕（Tasks）
**主要内容**：
- 顶部添加任务输入框
- 任务列表（FlatList）
  - 每个任务项显示：
    - 任务名称
    - 完成的番茄钟数量
    - 完成状态复选框
    - 删除按钮（滑动显示）
- 空状态提示（无任务时）

**功能**：
- 添加新任务
- 标记任务完成
- 删除任务
- 选择任务作为当前工作任务
- 数据本地持久化（AsyncStorage）

### 3. 统计屏幕（Stats）
**主要内容**：
- 今日统计卡片
  - 完成的番茄钟数量
  - 专注时长
  - 完成的任务数
- 本周统计图表
  - 每日番茄钟数量柱状图
- 总计数据
  - 累计番茄钟数
  - 累计专注时长

**功能**：
- 展示统计数据
- 数据可视化
- 历史记录查看

### 4. 设置屏幕（Settings）
**主要内容**：
- 时间设置
  - 工作时长（默认25分钟）
  - 短休息时长（默认5分钟）
  - 长休息时长（默认15分钟）
  - 长休息间隔（默认4个番茄钟）
- 通知设置
  - 启用/禁用通知
  - 通知声音选择
- 主题设置
  - 浅色/深色/跟随系统
- 关于信息

**功能**：
- 自定义番茄钟时长
- 配置通知偏好
- 切换主题
- 数据持久化

## 主要用户流程

### 流程1：开始一个番茄钟
1. 用户打开应用 → 主屏幕
2. （可选）点击任务名称 → 跳转到任务列表 → 选择任务 → 返回主屏幕
3. 点击开始按钮 → 计时器开始倒计时
4. 圆形进度环动画显示进度
5. 时间到达 → 通知提醒 → 自动切换到休息模式

### 流程2：管理任务
1. 用户点击底部Tab → 任务列表屏幕
2. 在输入框输入任务名称 → 点击添加
3. 任务出现在列表中
4. 点击任务 → 设置为当前任务
5. 滑动任务项 → 显示删除按钮 → 删除任务

### 流程3：查看统计
1. 用户点击底部Tab → 统计屏幕
2. 查看今日完成的番茄钟数量
3. 滚动查看本周统计图表
4. 查看总计数据

### 流程4：调整设置
1. 用户点击底部Tab → 设置屏幕
2. 调整工作时长滑块 → 自动保存
3. 切换通知开关 → 自动保存
4. 选择主题 → 立即应用

## 交互设计

### 按钮反馈
- 主要按钮（开始/暂停）：缩放动画（0.97）+ 轻触觉反馈
- 次要按钮（重置、添加）：透明度变化（0.7）
- 列表项：透明度变化（0.8）

### 动画
- 计时器进度环：平滑的圆形进度动画
- 模式切换：淡入淡出过渡（250ms）
- 任务添加/删除：滑动动画（200ms）
- 页面切换：Tab切换使用原生过渡

### 通知
- 番茄钟完成：成功触觉反馈 + 推送通知
- 休息结束：提示触觉反馈 + 推送通知

## 数据存储
使用 AsyncStorage 本地存储：
- 任务列表数据
- 统计数据（每日番茄钟记录）
- 用户设置（时长、通知、主题）
- 当前计时器状态（支持应用重启恢复）

## 技术要点
- 使用 React Native Timer API 实现精确计时
- 使用 expo-notifications 实现推送通知
- 使用 expo-keep-awake 防止屏幕休眠
- 使用 react-native-reanimated 实现流畅动画
- 使用 AsyncStorage 实现数据持久化
- 支持后台计时和通知
